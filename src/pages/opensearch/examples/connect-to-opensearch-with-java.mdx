---
title: Connecting to an OpenSearch Cluster with Java
metaTitle: Learn How to connect to an OpenSearch Cluster with Java
pagination: false
timestamp: false
stackTypes: opensearch
---

## Connect to an OpenSearch Cluster with Java

This article assumes that you have already created an OpenSearch Cluster, if you have not yet done this then 
please see this guide to create to create a cluster:

[Creating an OpenSearch Cluster](creating-opensearch-cluster.mdx)

Here's a Python example of sending logs to OpenSearch, this example uses the __OpenSearch Java Client__
_(org.opensearch.client:opensearch-java)_ and integrates it with the logging framework __SLF4J__.

This guide is created using __Maven__.

<Steps>
  ### Add Dependencies

  Add the following depenencies to your __pom.xml__ file

  ```xml copy filename="pom.xml"
  <dependencies>
    <!-- OpenSearch Java Client -->
    <dependency>
        <groupId>org.opensearch.client</groupId>
        <artifactId>opensearch-java</artifactId>
        <version>2.10.0</version>
    </dependency>
    <!-- SLF4J Logging -->
    <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>slf4j-api</artifactId>
        <version>2.0.7</version>
    </dependency>
  </dependencies>
  ```

  ### Java Code Example

  ```java copy filename="program.java" /@elasticsearch.endpointAddress/ /@elasticsearch.username/ /@elasticsearch.password/
  import org.opensearch.client.opensearch.OpenSearchClient;
  import org.opensearch.client.opensearch.core.IndexRequest;
  import org.opensearch.client.opensearch.core.IndexResponse;
  import org.opensearch.client.transport.rest_client.RestClientTransport;
  import org.opensearch.client.transport.rest_client.RestClientTransport.Builder;
  import org.apache.http.auth.AuthScope;
  import org.apache.http.auth.UsernamePasswordCredentials;
  import org.apache.http.impl.client.BasicCredentialsProvider;
  import org.elasticsearch.client.RestClient;
  import org.slf4j.Logger;
  import org.slf4j.LoggerFactory;

  import java.io.IOException;
  import java.util.HashMap;
  import java.util.Map;

  public class OpenSearchLogger {
      private static final Logger logger = LoggerFactory.getLogger(OpenSearchLogger.class);

      public static void main(String[] args) {
          String endpoint = "@elasticsearch.endpointAddress:9200";
          String username = "@elasticsearch.username";
          String password = "@elasticsearch.password";
          String indexName = "logit-example";

          // Configure authentication
          BasicCredentialsProvider credentialsProvider = new BasicCredentialsProvider();
          credentialsProvider.setCredentials(
                  AuthScope.ANY,
                  new UsernamePasswordCredentials(username, password)
          );

          // Create OpenSearch REST client
          RestClient restClient = RestClient.builder(org.apache.http.HttpHost.create(endpoint))
                  .setHttpClientConfigCallback(httpClientBuilder -> 
                      httpClientBuilder.setDefaultCredentialsProvider(credentialsProvider))
                  .build();

          // Transport and OpenSearch client
          RestClientTransport transport = new RestClientTransport(restClient, new org.opensearch.client.json.jackson.JacksonJsonpMapper());
          OpenSearchClient client = new OpenSearchClient(transport);

          try {
              // Create a log entry
              Map<String, Object> logEntry = new HashMap<>();
              logEntry.put("timestamp", System.currentTimeMillis());
              logEntry.put("level", "INFO");
              logEntry.put("message", "This is a log message from Java");
              logEntry.put("service", "example-service");

              // Send log to OpenSearch
              IndexRequest<Map<String, Object>> request = new IndexRequest.Builder<Map<String, Object>>()
                      .index(indexName)
                      .document(logEntry)
                      .build();

              IndexResponse response = client.index(request);

              logger.info("Log indexed with ID: {}", response.id());
          } catch (Exception e) {
              logger.error("Failed to send log to OpenSearch", e);
          } finally {
              try {
                  restClient.close();
              } catch (IOException e) {
                  logger.error("Failed to close OpenSearch client", e);
              }
          }
      }
  }
  ```
  
  ### Key Points

  Ensure all required dependencies are correctly installed.

  Properly handle exceptions for production use, e.g., retry logic for failed requests.
  
  ### Running the Application:

  Build the Project:

  ```bash copy
  mvn clean install
  ```

  Use your IDEâ€™s "Run" feature or execute the compiled JAR file:

   ```bash copy
  java -jar target/your-application-name.jar
  ```

  ### Further Help and Guidance

  See the articles below for further help and guidance as a next step:

</Steps>
